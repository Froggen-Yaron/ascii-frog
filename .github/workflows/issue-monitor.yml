name: ğŸ”„ Issue Monitor

on:
  issues:
    types: [closed]

permissions:
  issues: write
  contents: read

jobs:
  recreate-perpetual-issue:
    name: Recreate Perpetual Issue
    runs-on: ubuntu-latest
    # Only run if the closed issue has the specific perpetual title
    if: github.event.issue.title == 'Add Random Color to Frog Name Display'
    
    steps:
    - name: ğŸ“¥ Checkout Repository
      uses: actions/checkout@v4
      
    - name: ğŸ”„ Recreate Perpetual Issue
      run: |
        ISSUE_NUMBER="${{ github.event.issue.number }}"
        echo "ğŸš¨ Perpetual issue #$ISSUE_NUMBER was closed - recreating it..."
        
        # Get issue details using GitHub CLI
        TITLE=$(gh issue view $ISSUE_NUMBER --json title --jq '.title')
        BODY=$(gh issue view $ISSUE_NUMBER --json body --jq '.body')
        
        echo "ğŸ“ Recreating: $TITLE"
        
        # Create new issue with original content
        gh issue create \
          --title "$TITLE" \
          --body "$BODY" \
          --label "enhancement"
        
        echo "âœ… Perpetual issue recreated successfully!"
      env:
        GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
